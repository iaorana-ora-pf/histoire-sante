<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>A propos - Paana</title>
  <link rel="stylesheet" href="style-template.css" />
  <meta name="description" content="Paana - Base de connaissances sur la sant√© publique en Polyn√©sie fran√ßaise">
 </head>
<body>

  <header>
    <div class="logo">Paana</div>
    <nav>
      <a href="a-propos.html">A PROPOS</a>
      <a href="contribuer.html">CONTRIBUER</a>
      <a href="https://forms.gle/PR8ZHvSXxLNYETtx9" class="btn" target="_blank">SOUMETTRE</a>
    </nav>
  </header>

   <main>
   <body>

<div id="timeline"></div>
<div id="details"><em>üëà Cliquez un √©v√©nement pour voir les d√©tails ici</em></div>

<script type="text/javascript">
  const events = [
    {
      "id": 1,
      "titre": "√âv√©nement sant√© publique 1",
      "annee_debut": 1715,
      "annee_fin": 1716,
      "categorie_principale": "Surveillance et suivi de la sant√© publique",
      "categorie_secondaire": "Protection de la sant√©",
      "theme": "Crise sanitaire",
      "mots_cles": ["motcle1", "cl√©1", "sant√©1"],
      "description": "Description d√©taill√©e de l'√©v√©nement sant√© publique num√©ro 1, avec des impacts multiples sur la population.",
      "sources": ["https://source1.example.com"],
      "en_savoir_plus": "https://plus1.example.com"
    },
    {
      "id": 2,
      "titre": "√âv√©nement sant√© publique 2",
      "annee_debut": 1730,
      "annee_fin": 1732,
      "categorie_principale": "Acc√®s aux produits et technologies de sant√©",
      "categorie_secondaire": "Gouvernance en sant√© publique (stewardship)",
      "theme": "Technologie en sant√©",
      "mots_cles": ["motcle2", "cl√©2", "sant√©2"],
      "description": "Description d√©taill√©e de l'√©v√©nement sant√© publique num√©ro 2, avec des impacts multiples sur la population.",
      "sources": ["https://source2.example.com"],
      "en_savoir_plus": "https://plus2.example.com"
    }
    // ... Ajoute ici les 18 autres √©v√©nements depuis le fichier evenements_test_complet.json
  ];

  const items = new vis.DataSet(events.map(ev => ({
    id: ev.id,
    content: ev.titre,
    start: ev.annee_debut + '-01-01',
    end: ev.annee_fin !== ev.annee_debut ? ev.annee_fin + '-01-01' : null,
    group: ev.categorie_principale,
    className: ev.theme.replace(/\s+/g, '-').toLowerCase()
  })));

  const groups = new vis.DataSet([...new Set(events.map(ev => ev.categorie_principale))].map(cat => ({
    id: cat,
    content: cat
  })));

  const container = document.getElementById('timeline');
  const timeline = new vis.Timeline(container, items, groups, {
    zoomMin: 1000 * 60 * 60 * 24 * 365 * 1,
    zoomMax: 1000 * 60 * 60 * 24 * 365 * 50,
    start: '1700-01-01',
    end: '2030-01-01'
  });

  const details = document.getElementById('details');

  timeline.on("select", function (props) {
    const ev = events.find(e => e.id === props.items[0]);
    if (ev) {
      const sameThemeEvents = events.filter(e => e.theme === ev.theme);
      const currentIndex = sameThemeEvents.findIndex(e => e.id === ev.id);
      const prev = sameThemeEvents[currentIndex - 1];
      const next = sameThemeEvents[currentIndex + 1];
      details.innerHTML = `
        <div class="event-title">${ev.titre}</div>
        <div><strong>Ann√©e(s):</strong> ${ev.annee_debut} - ${ev.annee_fin}</div>
        <div><strong>Cat√©gorie principale:</strong> ${ev.categorie_principale}</div>
        <div><strong>Cat√©gorie secondaire:</strong> ${ev.categorie_secondaire}</div>
        <div><strong>Th√®me:</strong> ${ev.theme}</div>
        <div><strong>Mots-cl√©s:</strong> ${ev.mots_cles.join(", ")}</div>
        <div><strong>Description:</strong><br>${ev.description}</div>
        <div><strong>Sources:</strong> <a href="${ev.sources[0]}" target="_blank">${ev.sources[0]}</a></div>
        <div><strong>Pour aller plus loin:</strong> <a href="${ev.en_savoir_plus}" target="_blank">${ev.en_savoir_plus}</a></div>
        <hr>
        <div><strong>Autres √©v√©nements du m√™me th√®me :</strong><br>${
          sameThemeEvents.map(e => `<div class="${e.id === ev.id ? 'active' : ''}">${e.titre}</div>`).join('')
        }</div>
        <div style="margin-top:10px;">
          ${prev ? `<button onclick="timeline.setSelection(${prev.id})">‚¨ÖÔ∏è Pr√©c√©dent</button>` : ""}
          ${next ? `<button onclick="timeline.setSelection(${next.id})">Suivant ‚û°Ô∏è</button>` : ""}
        </div>
      `;
    }
  });
</script>
  
  <footer>
    <p>2025 - Emmanuelle RUPP-TERRIS - <a href="mailto:frise.sante.pf@gmail.com">Contact</a></p>
  </footer>

</body>
</html>
